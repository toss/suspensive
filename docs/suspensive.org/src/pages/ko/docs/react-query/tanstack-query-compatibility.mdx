import { Callout } from '@/components'

# TanStack Query v4, 5λ¥Ό λ¨λ‘ μ§€μ›

<Callout type='info'>

2.2.0 λ²„μ „ μ΄ν›„λ΅λ” @tanstack/react-query v4μ™€ v5μ„ λ¨λ‘ μ§€μ›ν•©λ‹λ‹¤. λ” λ‚®μ€ λ²„μ „μ λΈλΌμ°μ €λ¥Ό μ§€μ›ν•λ ¤λ©΄ @suspensive/react-queryλ¥Ό @tanstack/react-query v4μ™€ ν•¨κ» μ‚¬μ©ν•μ„Έμ”.

</Callout>

@suspensive/react-queryλ” λ‚΄λ¶€μ μΌλ΅ @tanstack/react-queryμ λ²„μ „μ— λ€μ‘ν•μ—¬ μΈν„°νμ΄μ¤λ¥Ό μ κ³µν•λ” @suspensive/react-query-4μ™€ @suspensive/react-query-5λ΅ κµ¬μ„±λμ–΄ μμµλ‹λ‹¤. μ‚¬μ©μ ν™κ²½μ— μ„¤μΉλ @tanstack/react-query λ²„μ „μ„ κ°μ§€ν•μ—¬ μλ™μΌλ΅ νΈν™λλ” μΈν„°νμ΄μ¤λ¥Ό μ κ³µν•©λ‹λ‹¤.

## Command-Line Interface (CLI)

@suspensive/react-queryμ Command-Line Interface (CLI)λ” @tanstack/react-queryμ™€μ νΈν™μ„± λ¬Έμ λ¥Ό ν•΄κ²°ν•κΈ° μ„ν• λ„κµ¬μ…λ‹λ‹¤. λ…λ Ήμ–΄λ¥Ό ν†µν•΄ μ‚¬μ©μ ν™κ²½μ— μ„¤μΉλ @tanstack/react-queryμ™€μ νΈν™μ„±μ„ ν™•μΈν•κ³ , @suspensive/react-queryμ μΈν„°νμ΄μ¤λ¥Ό νΈν™λλ” μΈν„°νμ΄μ¤λ΅ μ „ν™ν•  μ μμµλ‹λ‹¤.

ν•μ§€λ§ μ‹¤μ λ΅ CLIλ¥Ό μ‚¬μ©ν•  μΌμ€ λ“λ¬Όλ©°, @suspensive/react-query μ„¤μΉ μ‹ μλ™μΌλ΅ μ‚¬μ©μ ν™κ²½μ— μ„¤μΉλ @tanstack/react-queryκ³Ό νΈν™λλ” μΈν„°νμ΄μ¤λ¥Ό μ κ³µν•©λ‹λ‹¤.

## μ‹μ‘ν•κΈ°

CLIλ” @suspensive/react-query ν¨ν‚¤μ§€μ— ν¬ν•¨λμ–΄ μμµλ‹λ‹¤. μ¶”κ°€μ μΈ μ„¤μΉλ” ν•„μ” μ—†μΌλ©°, μ•„λ λ…λ Ήμ–΄λ¥Ό ν†µν•΄ λ°”λ΅ μ‚¬μ©ν•  μ μμµλ‹λ‹¤.

```bash
npx suspensive-react-query
```

λλ” κ°„λ‹¨ν `srq`λ΅λ„ μ‚¬μ©ν•  μ μμµλ‹λ‹¤.

```bash
npx srq
```

## λ…λ Ήμ–΄

ν„μ¬ CLIκ°€ μ κ³µν•λ” λ…λ Ήμ–΄λ” μ΄ 5κ°λ΅, κ° λ…λ Ήμ–΄μ μ„¤λ…μ€ λ‹¤μκ³Ό κ°™μµλ‹λ‹¤.

| λ…λ Ήμ–΄  | μ„¤λ…                                                                                                                                          |
| ------- | --------------------------------------------------------------------------------------------------------------------------------------------- |
| version | ν„μ¬ μ„¤μΉλ @suspensive/react-queryμ λ²„μ „μ„ ν‘μ‹ν•©λ‹λ‹¤.                                                                                      |
| help    | λ…λ Ήμ–΄μ μ‚¬μ© λ°©λ²•μ„ μ½μ†”μ—μ„ ν™•μΈν•  μ μμµλ‹λ‹¤.                                                                                             |
| status  | ν„μ¬ μ‚¬μ© μ¤‘μΈ @tanstack/react-query λ²„μ „κ³Όμ νΈν™μ„±μ„ ν™•μΈν•©λ‹λ‹¤.                                                                            |
| switch  | @tanstack/react-queryμ λ²„μ „κ³Ό νΈν™λλ” Suspensive μΈν„°νμ΄μ¤λ¥Ό μ‚¬μ©ν•λ„λ΅ @suspensive/react-queryμ λ‚΄λ³΄λ‚΄κΈ°(exports)λ¥Ό μ „ν™ν•©λ‹λ‹¤.          |
| fix     | @tanstack/react-queryμ λ²„μ „κ³Ό νΈν™λλ” Suspensive μΈν„°νμ΄μ¤λ¥Ό μ‚¬μ©ν•λ„λ΅ @suspensive/react-queryμ λ‚΄λ³΄λ‚΄κΈ°(exports)λ¥Ό μλ™μΌλ΅ μ „ν™ν•©λ‹λ‹¤. |

### version

ν„μ¬ μ„¤μΉλ @suspensive/react-queryμ λ²„μ „μ„ ν‘μ‹ν•©λ‹λ‹¤. μ΄λ” ν¨ν‚¤μ§€μ λ²„μ „μΌλ΅ `package.json`μ— λ…μ‹λ λ²„μ „μ„ ν‘μ‹ν•λ©°, @tanstack/react-queryμ™€ νΈν™λλ„λ΅ λ‚΄λ¶€μ μΌλ΅ κµ¬μ„±ν•λ” @suspensive/react-query-4 λλ” @suspensive/react-query-5μ λ²„μ „μ„ μλ―Έν•μ§€λ” μ•μµλ‹λ‹¤.

```bash
npx suspensive-react-query -v
```

λλ”

```bash
npx suspensive-react-query --version
```

### help

λ…λ Ήμ–΄μ μ‚¬μ© λ°©λ²•μ„ μ½μ†”μ—μ„ ν™•μΈν•  μ μμµλ‹λ‹¤. μλ¥Ό λ“¤μ–΄ `fix` λ…λ Ήμ–΄μ— λ€ν•΄ μμ„Έν μ•κ³  μ‹¶λ‹¤λ©΄, λ‹¤μκ³Ό κ°™μ΄ λ…λ Ήμ–΄λ¥Ό μ‚¬μ©ν•μ—¬ ν™•μΈν•  μ μμµλ‹λ‹¤.

```bash
npx suspensive-react-query fix -h
```

λλ”

```bash
npx suspensive-react-query --help
```

### status

ν„μ¬ μ‚¬μ©μ ν™κ²½μ— μ„¤μΉλ @tanstack/react-queryμ™€ @suspensive/react-queryμ νΈν™μ„± μƒνƒλ¥Ό ν™•μΈν•  μ μμΌλ©°, μ‚¬μ© κ°€λ¥ν• μΈν„°νμ΄μ¤ ν•­λ©μ—μ„ μ–΄λ–¤ μΈν„°νμ΄μ¤κ°€ ν„μ¬ ν™κ²½μ—μ„ μ‚¬μ© κ°€λ¥ν•μ§€ ν™•μΈν•  μ μμµλ‹λ‹¤.

```bash
npx suspensive-react-query status
```

μλ¥Ό λ“¤μ–΄, @suspensive/react-query@2.12.1 λ²„μ „κ³Ό @tanstack/react-query@5.51.21 λ²„μ „μ„ μ‚¬μ© μ¤‘μΈ κ²½μ°, λ‹¤μκ³Ό κ°™μ€ κ²°κ³Όλ¥Ό ν™•μΈν•  μ μμµλ‹λ‹¤.

```
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚ @suspensive/react-query@2.12.1          β”‚ status   β”‚ available interfaces               β”‚
β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”Όβ”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”Όβ”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¤
β”‚ exports  β”‚ @suspensive/react-query-5    β”‚ πΆ       β”‚ SuspenseQuery SuspenseQueries      β”‚
β”‚ from     β”‚ @2.12.1                      β”‚          β”‚ SuspenseInfiniteQuery              β”‚
β”‚          β”‚                              β”‚          β”‚ QueryErrorBoundary Mutation        β”‚
β”‚          β”β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”Όβ”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”Όβ”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¤
β”‚          β”‚ @tanstack/react-query        β”‚ πΆ       β”‚ useSuspenseQuery                   β”‚
β”‚          β”‚ @5.51.21                     β”‚          β”‚ useSuspenseQueries                 β”‚
β”‚          β”‚                              β”‚          β”‚ useSuspenseInfiniteQuery           β”‚
β”‚          β”‚                              β”‚          β”‚ queryOptions infiniteQueryOptions  β”‚
β””β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”΄β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”΄β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”΄β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
```

### switch

μ‚¬μ©μ ν™κ²½μ— μ„¤μΉλ @tanstack/react-queryμ versionκ³Ό νΈν™λλ” Suspensive μΈν„°νμ΄μ¤λ¥Ό μ‚¬μ©ν•λ„λ΅ @suspensive/react-queryμ λ‚΄λ³΄λ‚΄κΈ°(exports)λ¥Ό μ „ν™ν•©λ‹λ‹¤. μ΄ μ‘μ—…μ€ @suspensive/react-queryμ μ—”νΈλ¦¬ νμΌ(dist/index.js)μ„ μ—…λ°μ΄νΈν•μ—¬ μν–‰λ©λ‹λ‹¤.

```typescript
// dist/index.js of @suspensive/react-query

// "npx suspensive-react-query switch 4"λ¥Ό μ‚¬μ©ν•  λ•
// @suspensive/react-queryμ dist/index.js
export * from '@suspensive/react-query-4' // @tanstack/react-query@4μ© Suspensive μΈν„°νμ΄μ¤
// "npx suspensive-react-query switch 5"λ¥Ό μ‚¬μ©ν•  λ•
// @suspensive/react-queryμ dist/index.js
export * from '@suspensive/react-query-5' // @tanstack/react-query@5μ© Suspensive μΈν„°νμ΄μ¤
```

@tanstack/react-query v5λ¥Ό μ‚¬μ©ν•κ³  μλ”λ° μ¤λ¥κ°€ λ°μƒν•λ©΄, λ‹¤μ λ…λ Ήμ–΄λ¥Ό μ‚¬μ©ν•μ—¬ μ—”νΈλ¦¬ νμΌ(dist/index.js)μ„ μ—…λ°μ΄νΈν•μ—¬ νΈν™λλ” μΈν„°νμ΄μ¤λ΅ μ „ν™ν•  μ μμµλ‹λ‹¤.

```bash
npx suspensive-react-query switch 5
```

### fix

`fix` λ…λ Ήμ–΄λ” @suspensive/react-queryμ™€ @tanstack/react-queryμ΄ νΈν™λμ§€ μ•λ” ν™κ²½μ—μ„ μ†μ‰½κ² λ²„μ „μ„ λ§μ¶”λ” κ°„νΈν• λ°©λ²•μ…λ‹λ‹¤. μ‚¬μ©μ ν™κ²½μ @tanstack/react-queryμ λ²„μ „κ³Ό νΈν™λλ” Suspensive μΈν„°νμ΄μ¤λ¥Ό μ‚¬μ©ν•λ„λ΅ @suspensive/react-queryμ λ‚΄λ³΄λ‚΄κΈ°(exports)λ¥Ό μλ™μΌλ΅ μ „ν™ν•©λ‹λ‹¤.

```bash
npx suspensive-react-query fix
```

## λ¬Έμ  ν•΄κ²°

λΉλ“ μ¤‘ @suspensive/react-queryμ— λ€ν• μ¤λ¥κ°€ λ°μƒν•λ©΄, λ€λ¶€λ¶„ μ„¤μΉλ @tanstack/react-queryμ™€μ νΈν™μ„± λ¬Έμ λ΅ λ°μƒλλ” κ²ƒμ…λ‹λ‹¤.

λ‹¤μκ³Ό κ°™μ€ λ°©λ²•μΌλ΅ `package.json`μ— μ‚¬μ©ν•κ³ μ ν•λ” λ²„μ „μ„ μ§€μ •ν•  μ μμµλ‹λ‹¤. λΉλ“ μ‹ μλ™μΌλ΅ μ¬λ°”λ¥Έ λ²„μ „μ„ μ‚¬μ©ν•κ² ν•λ ¤λ©΄ λ‹¤μκ³Ό κ°™μ΄ μ¤ν¬λ¦½νΈλ¥Ό μ‚¬μ©ν•  μ μμµλ‹λ‹¤.

```json
{
  "scripts": {
    "build": "suspensive-react-query fix && next build"
  }
}
```

λλ” @suspensive/react-queryμ λ²„μ „μ„ κ³ μ •ν•λ ¤λ©΄ λ‹¤μκ³Ό κ°™μ΄ μ„¤μ •ν•  μ μμµλ‹λ‹¤.

```json
{
  "scripts": {
    "build": "suspensive-react-query switch 5 && next build"
  }
}
```
