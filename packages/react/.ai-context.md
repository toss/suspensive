# @suspensive/react - AI Context

## Package Purpose

Core React Suspense utilities that make React Suspense easier to use. This package provides SSR-safe components and simplified error boundaries.

## Key Components

### `<Suspense/>`

Enhanced React.Suspense with SSR support via `clientOnly` prop.

```typescript
<Suspense clientOnly fallback={<Loading />}>
  <AsyncComponent />
</Suspense>
```

### `<ErrorBoundary/>`

Declarative error boundary with simplified fallback interface.

```typescript
<ErrorBoundary fallback={({ error, reset }) => <ErrorUI />}>
  <Component />
</ErrorBoundary>
```

### `<ErrorBoundaryGroup/>`

Group multiple error boundaries for coordinated reset.

```typescript
<ErrorBoundaryGroup>
  <ErrorBoundary fallback={<Error />}>...</ErrorBoundary>
  <ErrorBoundary fallback={<Error />}>...</ErrorBoundary>
</ErrorBoundaryGroup>
```

### `<Delay/>`

Delay rendering children for specified milliseconds.

```typescript
<Delay ms={200}>
  <Component />
</Delay>
```

### `<ClientOnly/>`

Only render children on client-side.

```typescript
<ClientOnly fallback={<SSRContent />}>
  <BrowserOnlyComponent />
</ClientOnly>
```

## Key Hooks

### `useErrorBoundary()`

Programmatically trigger error boundary.

```typescript
const errorBoundary = useErrorBoundary()
errorBoundary.setError(new Error('Failed'))
```

### `useIsClient()`

Check if code is running on client.

```typescript
const isClient = useIsClient()
```

## Key Utilities

### `wrap()`

Wrap components with Suspense and ErrorBoundary.

```typescript
const wrapped = wrap
  .ErrorBoundary({ fallback: <Error /> })
  .Suspense({ fallback: <Loading /> })
  .on(MyComponent)
```

## Important Notes

- No external dependencies (peer dep: React only)
- Must work in both SSR and CSR
- All components are tree-shakeable
- TypeScript types are fully inferred

## File Structure

- `src/Suspense.tsx` - Suspense component
- `src/ErrorBoundary.tsx` - ErrorBoundary component
- `src/ErrorBoundaryGroup.tsx` - ErrorBoundaryGroup component
- `src/Delay.tsx` - Delay component
- `src/ClientOnly.tsx` - ClientOnly component
- `src/hooks/` - Hook implementations
- `src/contexts/` - Context implementations
- `*.spec.tsx` - Runtime tests
- `*.test-d.tsx` - Type tests
